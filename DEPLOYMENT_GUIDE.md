# Deployment Guide

## Part 1: Deploy Backend to Render

### Step 1: Push to GitHub
1. Download/export this project from Replit
2. Create a new repository on GitHub
3. Push the code to GitHub:
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git
   git push -u origin main
   ```

### Step 2: Connect to Render
1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click **"New +"** button → Select **"Web Service"**
3. Choose **"Build and deploy from a Git repository"**
4. Click **"Connect GitHub"** and authorize Render
5. Select your repository from the list
6. Configure the service:
   - **Name**: wonke-pos-backend
   - **Root Directory**: `Wonke-POS`
   - **Runtime**: Node
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm run start`
7. Add Environment Variables:
   - `NODE_ENV` = `production`
   - `DATABASE_URL` = your PostgreSQL connection string (you can use Render's PostgreSQL or external)
8. Click **"Create Web Service"**

After deployment, note your backend URL (e.g., `https://wonke-pos-backend.onrender.com`)

---

## Part 2: Build Android APK

### Step 1: Install Dependencies Locally
```bash
cd Wonke-POS
npm install
npm install @capacitor/core @capacitor/cli @capacitor/android
```

### Step 2: Configure API URL
Edit `client/src/lib/queryClient.ts` (or wherever API calls are made) to point to your Render backend URL:
```typescript
const API_BASE_URL = 'https://wonke-pos-backend.onrender.com';
```

### Step 3: Build the Web App
```bash
npm run build
```

### Step 4: Initialize Capacitor and Add Android
```bash
npx cap init "Wonke POS" com.wonke.pos --web-dir dist/public
npx cap add android
npx cap sync
```

### Step 5: Open in Android Studio
```bash
npx cap open android
```

### Step 6: Build APK in Android Studio
1. In Android Studio, go to **Build** → **Build Bundle(s) / APK(s)** → **Build APK(s)**
2. Wait for the build to complete
3. Find your APK at: `android/app/build/outputs/apk/debug/app-debug.apk`

For a signed release APK:
1. Go to **Build** → **Generate Signed Bundle / APK**
2. Follow the wizard to create a keystore and sign your APK

---

## Quick Reference

| Service | What to Do |
|---------|------------|
| **GitHub** | Push code to repository |
| **Render** | Connect GitHub repo, configure env vars |
| **Android Studio** | Build APK after `npx cap sync` |

## Environment Variables Needed for Render

| Variable | Description |
|----------|-------------|
| `NODE_ENV` | Set to `production` |
| `DATABASE_URL` | PostgreSQL connection string |
| `SESSION_SECRET` | (Auto-generated by Render if using render.yaml) |
